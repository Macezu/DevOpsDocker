FROM ubuntu:18.04

EXPOSE 8080

WORKDIR /usr/src/app

COPY . .

RUN apt-get update && apt-get install -y curl \
    && curl -O https://storage.googleapis.com/golang/go1.13.5.linux-amd64.tar.gz | bash - && go build \
    && apt-get purge -y --auto-remove curl && rm -rf /var/lib/apt/lists/* \ 
    && useradd -m appuser && chown -R appuser:appuser ./server

ENV REQUEST_ORIGIN=http://localhost:5000

USER appuser

CMD ["./server"]
